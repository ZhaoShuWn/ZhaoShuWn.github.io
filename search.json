[{"title":"机器人学-运动控制（4）","path":"/2024/05/19/机器人学-运动控制（4）/","content":"5、RPY角RPY角是描述飞机等物体在空中飞行时姿态的一种方法，将坐标系固定在飞机上。 绕着Z轴转动称为横滚（Roll） 绕着Y轴转动称为俯仰（Pitch） 绕着X轴转动称为偏航（Yaw） RPY叫属于绕固定坐标系旋转的位姿变换方式，变换规则：先绕着X轴旋转$\\gamma$，再绕着Y轴旋转$\\beta$，最后绕着Z轴旋转$\\alpha$。 \\begin{aligned} RPY(\\gamma, \\beta, \\alpha) & =R\\left(Z_{i}, \\alpha\\right) R\\left(Y_{i}, \\beta\\right) R\\left(X_{i}, \\gamma\\right) \\\\ & =\\left(\\begin{array}{ccc} c \\alpha & -s \\alpha & 0 \\\\ s \\alpha & c \\alpha & 0 \\\\ 0 & 0 & 1 \\end{array}\\right)\\left(\\begin{array}{ccc} c \\beta & 0 & s \\beta \\\\ 0 & 1 & 0 \\\\ -s \\beta & 0 & c \\beta \\end{array}\\right)\\left(\\begin{array}{ccc} 1 & 0 & 0 \\\\ 0 & c \\gamma & -s \\gamma \\\\ 0 & s \\gamma & c \\gamma \\end{array}\\right) \\\\ & =\\left(\\begin{array}{ccc} c \\alpha c \\beta & c \\alpha s \\beta s \\gamma-s \\alpha c \\gamma & c \\alpha s \\beta c \\gamma+s \\alpha s \\gamma \\\\ s \\alpha c \\beta & s \\alpha s \\beta s \\gamma-c \\alpha c \\gamma & s \\alpha s \\beta c \\gamma-c \\alpha s \\gamma \\\\ -s \\beta & c \\beta s \\gamma & c \\beta c \\gamma \\end{array}\\right) \\end{aligned}5.1他的逆解 给出变换后的旋转矩阵，现在求解对应绕固定坐标系的转角。 RPY(\\gamma, \\beta, \\alpha)=\\left(\\begin{array}{cccc} n_{x} & o_{x} & a_{x} & 0 \\\\ n_{y} & o_{y} & a_{y} & 0 \\\\ n_{z} & o_{z} & a_{z} & 0 \\\\ 0 & 0 & 0 & 1 \\end{array}\\right)有上面两个矩阵第一列的第一个和第二个元素分别平方求和，得到： cos^{2}\\theta cos^{2}\\beta + sin^{2}\\theta cos^{2}\\beta = cos^{2}\\beta \\\\ = n_{x}^{2} + n_{y}^{2}即： cos\\beta = \\sqrt{n_{x}^{2} + n_{y}^{2}}这里本来应该是带正负，但是通常取$(90, 90]$。 又有： -sin\\beta = n_{z}则有： tan\\beta = -\\frac{n_{z}}{\\sqrt{n_{x}^{2} + n_{y}^{2}}}而对于求$\\alpha$，我们只需要矩阵第一列的第一个和第二个元素相除，即： \\frac{s\\alpha c\\beta}{c\\alpha c \\beta}= \\frac{n_{y}}{n_{x}}=tan\\alpha对于$\\gamma$同理，将矩阵最后一行的第二个第三个元素想除： tan\\gamma =\\frac{o_{z}}{a_{x}}注：如果$\\beta=\\pm90$，则$cos\\beta=0$，则 R=\\left[\\begin{array}{ccc} 0 & c \\alpha s \\gamma-s \\alpha c \\gamma & c \\alpha c \\gamma+s \\alpha s \\gamma \\\\ 0 & s \\alpha s \\gamma-c \\alpha c \\gamma & s \\alpha c \\gamma-c \\alpha s \\gamma \\\\ -1 & 0 & 0 \\end{array}\\right]这里只能解出他们的和或是差，假设$\\alpha=0$，则有：$\\beta=90$；$\\gamma=arctan \\frac{o_{x}}{o_{y}}$或$\\gamma=-arctan \\frac{o_{x}}{o_{y}}$。"},{"title":"机器人学-运动控制（3）","path":"/2024/05/19/机器人学-运动控制（3）/","content":"4、一般形式的旋转变换矩阵对于绕进过原点的任意单位矢量$f$旋转theta角度的旋转矩阵。 设$f=(f_{x}, f_{y}, f_{z})^{T}$，且$f^{2}_{x}+f^{2}_{y}+f^{2}_{z}=1$，则有公式： \\operatorname{Rot}(\\boldsymbol{f}, \\theta)=\\\\ \\left(\\begin{array}{cccc} f_{x} f_{x} vers \\theta+c \\theta & f_{y} f_{x} vers \\theta-f_{z} s \\theta & f_{z} f_{x} vers \\theta+f_{y} s \\theta & 0 \\\\ f_{x} f_{y} vers \\theta+f_{z} s \\theta & f_{y} f_{y} vers \\theta+c \\theta & f_{z} f_{y} vers \\theta-f_{y} s \\theta & 0 \\\\ f_{x} f_{z} vers \\theta-f_{z} s \\theta & f_{y} f_{z} vers \\theta+f_{x} s \\theta & f_{z} f_{z} vers \\theta+c \\theta & 0 \\\\ 0 & 0 & 0 & 1 \\end{array}\\right)其中，$vers\\theta=1-c\\theta$ 4.1 已知旋转矩阵，求$f$？ { }_{B}^{A} R=\\left(\\begin{array}{cccc} n_{x} & o_{x} & a_{x} & 0 \\\\ n_{y} & o_{y} & a_{y} & 0 \\\\ n_{z} & o_{z} & a_{z} & 0 \\\\ 0 & 0 & 0 & 1 \\end{array}\\right)求解坐标系{B}相对于坐标系{A}的等效旋转轴$f$和等效旋转角$\\theta$​。 由题可得： \\left(\\begin{array}{cccc} n_{x} & o_{x} & a_{x} & 0 \\\\ n_{y} & o_{y} & a_{y} & 0 \\\\ n_{z} & o_{z} & a_{z} & 0 \\\\ 0 & 0 & 0 & 1 \\end{array}\\right)=\\\\ \\left(\\begin{array}{cccc} f_{x} f_{x} vers \\theta+c \\theta & f_{y} f_{x} vers \\theta-f_{z} s \\theta & f_{z} f_{x} vers \\theta+f_{y} s \\theta & 0 \\\\ f_{x} f_{y} vers \\theta+f_{z} s \\theta & f_{y} f_{y} vers \\theta+c \\theta & f_{z} f_{y} vers \\theta-f_{y} s \\theta & 0 \\\\ f_{x} f_{z} vers \\theta-f_{z} s \\theta & f_{y} f_{z} vers \\theta+f_{x} s \\theta & f_{z} f_{z} vers \\theta+c \\theta & 0 \\\\ 0 & 0 & 0 & 1 \\end{array}\\right)等式左侧对角线求和为; n_{x}+o_{y}+a_{z}等式右侧对角线求和为： f^{2}_{x}(1-cos\\theta)+cos\\theta+f^{2}_{y}(1-cos\\theta)+cos\\theta+f^{2}_{z}(1-cos\\theta)+cos\\theta整理一下： f^{2}_{x}+f^{2}_{y}+f^{2}_{z}-(f^{2}_{x}+f^{2}_{y}+f^{2}_{z})cos\\theta+3cos\\theta即： 1+2cos\\theta左边等于右边，也就是是说 cos\\theta=\\frac{1}{2} (n_{x}+o_{y}+a_{z})接下来将矩阵中某些元素分别对应相减，得到： \\left\\{\\begin{array}{l} o_{z}-a_{y}=2 f_{x} sin \\theta \\\\ a_{x}-n_{z}=2 f_{y} sin \\theta \\\\ n_{y}-o_{x}=2 f_{z} sin \\theta \\end{array}\\right.对上面每个式子都平方再相加，得到： \\left(o_{z}-a_{y}\\right)^{2}+\\left(a_{x}-n_{z}\\right)^{2}+\\left(n_{y}-o_{x}\\right)^{2}=4 sin^{2} \\theta开个根号得到： sin \\theta= \\pm \\frac{1}{2} \\sqrt{\\left(o_{z}-a_{y}\\right)^{2}+\\left(a_{x}-n_{z}\\right)^{2}+\\left(n_{y}-o_{x}\\right)^{2}}用$\\frac{sin\\theta}{cos\\theta}=tan\\theta$，得到： \\tan \\theta= \\pm \\frac{\\sqrt{\\left(o_{z}-a_{y}\\right)^{2}+\\left(a_{x}-n_{z}\\right)^{2}+\\left(n_{y}-o_{x}\\right)^{2}}}{n_{x}+o_{y}+a_{z}-1}知道了角度，再由 \\left\\{\\begin{array}{l} o_{z}-a_{y}=2 f_{x} sin \\theta \\\\ a_{x}-n_{z}=2 f_{y} sin \\theta \\\\ n_{y}-o_{x}=2 f_{z} sin \\theta \\end{array}\\right.可得出： \\left\\{\\begin{array}{l} f_{x}=\\frac{o_{z}-a_{y}}{2 \\sin \\theta} \\\\ f_{y}=\\frac{a_{x}-n_{z}}{2 \\sin \\theta} \\\\ f_{z}=\\frac{n_{y}-o_{x}}{2 \\sin \\theta} \\end{array}\\right.注：转轴和转角可能不唯一。 4.2 实例1已知某个坐标变换$T=\\left(\\begin{array}{cccc}0 &amp; 1 &amp; 0 &amp; 0 \\\\0 &amp; 0 &amp; -1 &amp; 0 \\\\-1 &amp; 0 &amp; 0 &amp; 0 \\\\0 &amp; 0 &amp; 0 &amp; 1\\end{array}\\right)$，如果满足$Rot(f, \\theta)=T$，确定$f$和$\\theta$。 tan\\theta=\\pm\\sqrt{3}则如$\\theta\\in(0, \\pi)$，$cos\\theta=-\\frac{1}{2}$，$\\theta=\\frac{2}{3}\\pi$ 则可求得结果。"},{"title":"机器人学-运动控制（2）","path":"/2024/05/19/机器人学-运动控制（2）/","content":"3、齐次坐标与齐次变换矩阵齐次坐标是用$n+1$维来表示$n$维坐标，则该$n+1$维坐标即为$n$维坐标的齐次坐标。令$w$为该齐次坐标中的比例因子，他的形式为$p=(x_{0}, y_{0}, z_{0}, w)^{T}$​。它的目的是为了合并矩阵变换中的乘法和加法。 当$w=1$时，称为齐次坐标的规范化形式，即$p=(x_{0}, y_{0}, z_{0}, 1)^{T}$​。 当$w e1$时，则相当于该列阵中各元素同时乘以一个非零比例因子$w$，仍表示原来的点。 $p=(a, b, c, w)^{T}$，其中，$a=wp_{x}$；$b=wp_{y}$；$c=wp_{z}$​。 3.1 实例1将矢量$2i+2j+7k$被矢量$i-2j+6k$平移后得到新矢量$v_{1}$。 v_{1}= \\begin{pmatrix} 1 & 0 & 0 & 1 \\\\ 0 & 1 & 0 & -2 \\\\ 0 & 0 & 1 & 6 \\\\ 0 & 0 & 0 & 1 \\end{pmatrix} \\begin{pmatrix} 2\\\\ 2\\\\ 7\\\\ 1 \\end{pmatrix}=\\begin{pmatrix} 3\\\\ 0\\\\ 13\\\\ 1 \\end{pmatrix}3.2 实例2将矢量$2i+2j+7k$绕$z$轴旋转45度后得到新矢量$v_{2}$​ v_{2}= \\begin{pmatrix} 0.7 & -0.7 & 0 & 0 \\\\ 0.7 & 0.7 & 0 & 0 \\\\ 0 & 0 & 1 & 0 \\\\ 0 & 0 & 0 & 1 \\end{pmatrix} \\begin{pmatrix} 2\\\\ 2\\\\ 7\\\\ 1 \\end{pmatrix}=\\begin{pmatrix} 0\\\\ 2.82\\\\ 7\\\\ 1 \\end{pmatrix}3.3 实例3已知坐标系{B}的初始位姿与{A}重合，首先{B}相对于坐标系{A}的$z_{A}$轴转30度，再沿{A}的$x_{A}$轴移动12单位，并沿{A}的$y_{A}$轴移动6单位。求位置矢量$^{A}p_{B_{0}}$和旋转矩阵$^{A}_{B}R$。假设点p在坐标系{B}的描述为$^{B}p=(3, 7, 0)^{T}$，求他在坐标系{A}中的描述$^{A}p$​​。 该题中，$\\begin{pmatrix} ^{B}p\\\\ 1\\end{pmatrix}$，$\\begin{pmatrix} ^{A}_{B}R &amp; ^{A}p_{B_{0}} \\\\ 0 &amp; 1\\end{pmatrix}=^{A}_{B}T$, 则$^{A}p=^{A}_{B}T^{B}p$​。 3.4 实例4矩阵$T=\\begin{pmatrix} a &amp; 0 &amp; -1 &amp; 5 \\\\ b &amp; 0 &amp; 0 &amp; 6 \\\\ c &amp; -1 &amp; 0 &amp; -4 \\\\ 0 &amp; d &amp; 0 &amp; 1\\end{pmatrix}$为齐次旋转矩阵，求解其中未知数。"},{"title":"一些好用的网站汇总","path":"/2024/05/18/一些好用的网站/","content":"正则表达式https://regexr-cn.com/ Latex公式编辑https://www.latexlive.com/"},{"title":"机器人学-运动控制（1）","path":"/2024/05/17/机器人学-运动控制（1）/","content":"1、位置的描述坐标系A和B表示为：{A}、{B}。 $^{A}p$​ ：表示P在坐标系{A}中的位置矢量$(x_{0}, y_{0}, z_{0})$​，其中，$x_{0}$​，$y_{0}$​，$z_{0}$​表示点$p$​​在坐标系中的三个坐标分量。 $^{A}P_{B_{0}}=(p_{x}, p_{y}, p_{z})^{T}$：运动坐标系{B}的原点在坐标系{A}的位置。 2、坐标变换$^{A}_{B}R=(^{A}X_{B}, ^{A}y_{B}, ^{A}z_{B})$​​​：他表示坐标系{B}相对于参考坐标系{A}的空间表示。 公式：$^{A}p=^{A}_{B}R\\times^{B}p$​ 它的一些性质： $^{A}_{B}R$称为旋转矩阵，他共有9个元素，但是只有3个相互独立。 $^{A}_{B}R$的三个列向量都说单位矢量，且双双垂直。 $^{B}_{A}R=^{A}_{B}R^{-1}=^{A}_{B}R^{T}$ $\\lvert^{A}_{B}R\\rvert=1$​ $R$是正交矩阵 复合坐标变换：$^{A}p=^{A}_{B}R\\times^{A}p_{B}+^{A}p_{B_{0}}$​ 固定坐标系而言，变换顺序从右向左；相对坐标系而言，变换顺序从左向右。(越后面的旋转写到后面类似于从后面不断回到前面一次的变换) 2.1 实例1求点$p=(1, 2, 3)^{T}$绕着X轴旋转60度后的空间坐标。 $p’=R(X, 60)p$ 2.2 实例2如$v_{1}$绕$z$轴旋转45度得到$v_{2}$再绕$y$轴90度得到$v_{3}$ 则他的关系为$v_{3}=Rot(y, 90)Rot(z, 45)v_{1}$​（固定坐标系，从右向左）。 2.3 实例3开始时，坐标系{A}与坐标系{B}重合，使坐标系{B}绕$Z_{B}$旋转theata度；然后再绕$X_{B}$旋转phi度。求解对矢量$^{B}p$的描述变为对$^{A}p$描述的旋转矩阵。 $Rot(z, theta)Rot(x, phi)$"}]